# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem              1.0
PortGroup               mpi       1.0
PortGroup               cmake     1.1

name                    libmed
version                 4.1.1
revision                0
categories              science devel
platforms               darwin
maintainers             {mcalhoun @MarcusCalhoun-Lopez} openmaintainer
license                 GPL-3+ LGPL-3+
homepage                https://www.salome-platform.org

description             a library to store and exchange meshed data or computation results

long_description        MED (Modeling and Exchange of Data) is {*}${description}.

master_sites            https://files.salome-platform.org/Salome/other/
distname                med-${version}

checksums               rmd160  2e0a189cb4b5d72ae88c8e8fb26a61821e4e60be \
                        sha256  dc2b5d54ebf0666e3ff2e974041d2ab0da906061323537023ab165d573389dd0 \
                        size    50506725

patchfiles              patch-hdf5-1.12.diff \
                        patch-test10.diff

mpi.setup               require_fortran
if {[mpi_variant_isset]} {
    configure.args-append -DMEDFILE_USE_MPI=ON
}

configure.args-append   -DMEDFILE_BUILD_TESTS=OFF

depends_lib-append      port:hdf5
mpi.enforce_variant     hdf5

livecheck.regex         {med-(\d+(?:\.\d+)*)}
livecheck.url           https://www.salome-platform.org/downloads/current-version

# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           cargo   1.0
PortGroup           github  1.0

github.setup        ellie atuin 0.9.0 v
github.tarball_from archive
revision            0

description         Magical shell history

long_description    \
    {*}${description}. Atuin replaces your existing shell history with a \
    SQLite database, and records additional context for your commands. \
    Additionally, it provides optional and fully encrypted synchronisation of \
    your history between machines, via an Atuin server.

categories          sysutils
installs_libs       no
license             MIT
maintainers         {gmail.com:herby.gillot @herbygillot} \
                    openmaintainer

checksums           ${distname}${extract.suffix} \
                    rmd160  dda4439713969c851138be239cd9bdc70539cb60 \
                    sha256  82ecf05fb39b25339ef9ea22e26f28e643f5cf08b41bfc767eb17f2b2ced5ea1 \
                    size    445466

build.pre_args      --release -v -j${build.jobs}

destroot {
    xinstall -m 0755 \
        ${worksrcpath}/target/[cargo.rust_platform]/release/${name} \
        ${destroot}${prefix}/bin/
}

notes "
  To install atuin for zsh:

    $ echo 'eval \"\$(atuin init zsh)\"' >> ~/.zshrc

  To install atuin for bash, there are 2 steps:

  1. Install bash-prexec from https://github.com/rcaloras/bash-preexec
     (atuin requires preexec hooks for bash)

  2. Install atuin into .bashrc:

     $ echo 'eval \"\$(atuin init bash)\"' >> ~/.bashrc

"
